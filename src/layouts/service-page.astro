---
import Layout from './main.astro';
import Header from '@/components/layout/Header';
import Footer from '@/components/layout/Footer';

const {
  seo,
  overline = 'Service Overview',
  title,
  summary,
  heroImage,
  heroImageAlt = '',
  heroImageClass = '',
  benefits = [],
  ctaHeading = 'Ready to book this service?',
  ctaBody = 'Call 0405 837 584 or email admin@mksruralservices.com for a tailored quotation.' ,
  ctaPrimary = { label: 'Call 0405 837 584', href: 'tel:0405837584' },
  ctaSecondary = { label: 'Email the team', href: 'mailto:admin@mksruralservices.com' },
} = Astro.props;

if (!title) {
  throw new Error('service-page.astro requires a `title` prop.');
}

const finalSEO = seo ?? {
  title,
  description: summary ?? 'Detailed service information from MKS Rural Services.',
  image: heroImage ?? '/og-image.png',
  canonicalURL: Astro.site + Astro.url.pathname,
};

const hasHeroImage = Boolean(heroImage);
const hasBenefits = Array.isArray(benefits) && benefits.length > 0;
---

<Layout {...finalSEO}>
  <Header />
  <main class="bg-white">
    <section class="bg-gradient-to-b from-sky-50 via-white to-slate-100 py-20">
      <div class="container mx-auto max-w-4xl px-4 text-center space-y-4">
        <p class="text-sm font-semibold uppercase tracking-wide text-sky-700">{overline}</p>
        <h1 class="text-3xl md:text-5xl font-bold text-slate-900">{title}</h1>
        {summary && <p class="text-lg text-slate-700">{summary}</p>}
      </div>
    </section>

    {hasHeroImage && (
      <section class="relative -mt-12 pb-8">
        <div class="container mx-auto max-w-5xl px-4">
          <div class={`rounded-3xl overflow-hidden shadow-lg bg-slate-100 ${heroImageClass}`}>
            <img src={heroImage} alt={heroImageAlt} class="w-full object-cover" loading="lazy" />
          </div>
        </div>
      </section>
    )}

    <section class="py-16">
      <div class="container mx-auto max-w-5xl px-4 space-y-12">
        <slot name="intro" />

        {hasBenefits && (
          <section class="space-y-4">
            <h2 class="text-2xl font-bold text-slate-900">Key benefits</h2>
            <ul class="grid gap-4 md:grid-cols-2">
              {benefits.map((benefit) => (
                <li class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm text-base text-slate-700" key={benefit}>
                  {benefit}
                </li>
              ))}
            </ul>
          </section>
        )}

        <slot />

        <section class="space-y-8">
          <div class="space-y-2">
            <h2 class="text-2xl font-bold text-slate-900">Example projects</h2>
            <p class="text-base text-slate-700">
              Real-world outcomes that demonstrate how this service performs in the field.
            </p>
          </div>
          <div class="space-y-10">
            <slot name="case-studies" />
          </div>
        </section>
      </div>
    </section>

    <section class="py-16 bg-slate-900">
      <div class="container mx-auto max-w-4xl px-4 text-center text-white space-y-6">
        <h2 class="text-2xl md:text-3xl font-bold">{ctaHeading}</h2>
        <p class="text-base text-slate-100">{ctaBody}</p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          {ctaPrimary && (
            <a
              href={ctaPrimary.href}
              class="inline-flex items-center justify-center rounded-lg bg-white px-6 py-3 text-sky-800 font-semibold hover:bg-slate-100"
            >
              {ctaPrimary.label}
            </a>
          )}
          {ctaSecondary && (
            <a
              href={ctaSecondary.href}
              class="inline-flex items-center justify-center rounded-lg border border-white px-6 py-3 text-white font-semibold hover:bg-white/10"
            >
              {ctaSecondary.label}
            </a>
          )}
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>
